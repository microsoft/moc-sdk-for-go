# CLAUDE.md

> Project context for Claude sessions. Generated by `prime`.

## Quick Context

MOC SDK for Go is a Go SDK providing Azure-compatible API abstractions for Microsoft's MOC (Microsoft On-premises Cloud) infrastructure. It enables management of compute (VMs, scale sets), storage (VHDs), network (VNets, NICs, load balancers), and security (authentication, KeyVault) resources via gRPC communication with MOC cloud agents.

## Context Docs

- [Architecture](.claude/context/architecture.md) - System design, components, data flow
- [Patterns](.claude/context/patterns.md) - Design patterns, code conventions
- [Structure](.claude/context/structure.md) - Directory layout, key files
- [Usage](.claude/context/usage.md) - Build, install, SDK examples
- [Tests](.claude/context/tests.md) - Test framework, running tests

## Key Commands

```bash
make                # Full build (tidy, format, build, unittest)
make build          # Build Go packages and Windows DLL
make test           # Run all tests
make unittest       # Run unit tests (pkg/client, services/security)
make format         # Format Go code with gofmt
go mod tidy         # Fix module dependencies
```

## Notes

- **Module**: `github.com/microsoft/moc-sdk-for-go`
- **Go Version**: 1.24+
- **Key Dependency**: `github.com/microsoft/moc` (protobuf definitions)
- **Client Pattern**: Public `*Client` wraps internal WSSD gRPC client
- **Type Definitions**: Large files in `services/<domain>/<domain>.go` (e.g., `compute.go` is 68K lines)
- **Debug Mode**: Set `WSSD_DEBUG_MODE=on` for insecure connections
- **C++ Wrapper**: `wrapper/cpp/main.go` builds `MocCppWrapper.dll` for Windows interop
